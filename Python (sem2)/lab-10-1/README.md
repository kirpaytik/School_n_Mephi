## Индивидуальные домашние задания по теме «Стековый компилятор формул» 

---
### Теория

[Wiki](https://gitlab.digital.mephi.ru/python-base-23/lab010/lab-10-1/-/wikis/%D0%A1%D1%82%D0%B5%D0%BA%D0%BE%D0%B2%D1%8B%D0%B9-%D0%BA%D0%BE%D0%BC%D0%BF%D0%B8%D0%BB%D1%8F%D1%82%D0%BE%D1%80-%D1%84%D0%BE%D1%80%D0%BC%D1%83%D0%BB.-%D0%A2%D0%B5%D0%BE%D1%80%D0%B8%D1%8F)

### Формулировка задачи

* В нижеприведённых заданиях необходимо модифицировать текст эталонного проекта так, как этого требует конкретная постановка задачи.(вариант будет указан в [таблице](https://docs.google.com/spreadsheets/d/1Bl2La7PFLn6AhBpZe24vC8XQ1fjJb5fwWwWg2A9ah3U/edit?usp=sharing))
* Модифицированный код проекта должен содержать тесты, иллюстрирующие правильность решения задачи.




### Задания на модификацию стекового компилятора формул(compf)

1. Деление трактуется, как правоассоциативная операция.
2. Приоритеты операций сложения и вычитания выше, чем у операций умножения и деления.
3. В качестве имён переменных допускаются произвольные идентификаторы языка Python.
4. Для группировки в формулах можно использовать не только круглые, но также квадратные и фигурные скобки.
5. Допускаются формулы, запись которых содержит пробелы и состоит из нескольких строк.
6. Для коммутативных операций аргументы в программе для стекового компилятора появляются в алфавитном порядке.
8. Формулы, содержащие только записанные в десятичной системе счисления натуральные числа, абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие восьмеричные числа (запись которых обязана начинаться с 0o или 0O), и при этом операция вычитания является правоассоциативной.
9. Формулы, содержащие только записанные в десятичной системе счисления натуральные числа, абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие шестнадцатеричные числа (запись которых обязана начинаться с 0x или 0X), и при этом операция деления является правоассоциативной.
10. Формулы, содержащие только записанные в десятичной системе счисления натуральные числа, абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие двоичные числа (запись которых обязана начинаться с 0b или 0B), и при этом приоритет вычитания является максимальным.
11. Формулы, содержащие только записанные в десятичной системе счисления натуральные числа, абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие римские числа (в записи которых используются цифры I, V, X, L, C, D и M).
12. Формулы, содержащие только записанные в восьмеричной системе натуральные числа (обязательно начинающиеся с 0o или 0O), абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие только записанные в десятичной системе счисления числа, и при этом приоритет деления является минимальным.
13. Формулы, содержащие только записанные в шестнадцатеричной системе натуральные числа (обязательно начинающиеся с 0x или 0X), абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие только записанные в десятичной системе счисления числа, и при этом деление трактуется как правоассоциативная операция.
14. Формулы, содержащие только записанные в двоичной системе натуральные числа (обязательно начинающиеся с 0b или 0B), абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие только записанные в десятичной системе счисления числа, и при этом вычитание трактуется как правоассоциативная операция.
15. Формулы, содержащие только записанные в римской системе натуральные числа (с цифрами I, V, X, L, C, D и M), абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие только записанные в десятичной системе счисления числа.
16. Формулы, содержащие только записанные в восьмеричной системе натуральные числа (обязательно начинающиеся с 0o или 0O), абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие только записанные в двоичной системе счисления числа (запись которых обязана начинаться с 0b или 0B), и при этом приоритет операции умножения является минимальным.
17. Формулы, содержащие только записанные в восьмеричной системе натуральные числа (обязательно начинающиеся с 0o или 0O), абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие только записанные в шестнадцатеричной системе счисления числа (запись которых обязана начинаться с 0x или 0X), и при этом операция деления является правоассоциативной.
18. Формулы, содержащие только записанные в восьмеричной системе натуральные числа (обязательно начинающиеся с 0o или 0O), абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие римские числа (в записи которых используются цифры I, V, X, L, C, D и M).
19. Формулы, содержащие только записанные в двоичной системе натуральные числа (запись которых обязана начинаться с 0b или 0B), абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие только записанные в восьмеричной системе счисления числа (запись которых обязана начинаться с 0o или 0O), и при этом приоритет операции сложения является максимальным.
20. Формулы, содержащие только записанные в двоичной системе натуральные числа (запись которых обязана начинаться с 0b или 0B), абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие только записанные в шестнадцатеричной системе счисления числа (запись которых обязана начинаться с 0x или 0X), и при этом операция вычитания является правоассоциативной.
21. Формулы, содержащие только записанные в двоичной системе натуральные числа (запись которых обязана начинаться с 0b или 0B), абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие римские числа (в записи которых используются цифры I, V, X, L, C, D и M).
22. Формулы, содержащие только записанные в шестнадцатеричной системе натуральные числа (запись которых обязана начинаться с 0x или 0X), абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие только записанные в восьмеричной системе счисления числа (запись которых обязана начинаться с 0o или 0O), и при этом приоритет операций сложения и вычитания выше, чем приоритет операций умножения и деления.
23. Формулы, содержащие только записанные в шестнадцатеричной системе натуральные числа (запись которых обязана начинаться с 0x или 0X), абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие только записанные в двоичной системе счисления числа (запись которых обязана начинаться с нуля), и при этом все операции
являются правоассоциативными.
24. Формулы, содержащие только записанные в шестнадцатеричной системе натуральные числа (запись которых обязана начинаться с 0x или 0X), абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие римские числа (в записи которых используются цифры I, V, X, L, C, D и M).
25. Формулы, содержащие только записанные в римской системе натуральные числа (с цифрами I, V, X, L, C, D и M), абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие только записанные в восьмеричной системе счисления числа (обязательно начинающиеся с 0o или 0O), и при этом приоритет вычитания больше приоритета сложения, но меньше приоритета умножения и деления.
26. Формулы, содержащие только записанные в римской системе натуральные числа (с цифрами I, V, X, L, C, D и M), абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие только записанные в двоичной системе счисления числа (обязательно начинающиеся с 0b или 0B), и при этом все операции трактуются как правоассоциативные.
27. Формулы, содержащие только записанные в римской системе натуральные числа (с цифрами I, V, X, L, C, D и M), абсолютная величина которых не превосходит 3999, компилируются в программы для стекового калькулятора, содержащие только записанные в шестнадцатеричной системе счисления числа (обязательно начинающиеся с 0x или 0X), и при этом приоритеты всех операций равны.
28. В предположении, что язык стекового калькулятора расширен операцией F, которая заменяет верхний элемент стека x на величину 5*x-1, компилировать формулы, содержащие «угловые скобки» <>, обозначающие замену находящейся в них величины x на величину 5*x-1.
29. В предположении, что язык стекового калькулятора расширен битовыми операциями | и &, компилировать формулы, содержащие эти операции.
30. В предположении, что язык стекового калькулятора расширен операциями L (left) и R (right), реализующими побитовый сдвиг влево и вправо соответственно, компилировать формулы, содержащие операции << и >>.
31. В предположении, что язык стекового калькулятора расширен правоассоциативной и имеющей максимальный приоритет операцией возведения в степень ^, компилировать формулы, содержащие эту операцию.
32. В предположении, что язык стекового калькулятора расширен правоассоциативной и имеющей максимальный приоритет операцией возведения в степень ^, компилировать формулы, содержащие эту операцию, обозначаемую символами **.
33. В предположении, что язык стекового калькулятора расширен операцией D (duplicate), которая извлекает верхний элемент из стека и записывает его обратно в стек дважды, компилировать формулы, содержащие квадратные скобки [], обозначающие удвоение стоящего в них выражения.
34. В предположении, что язык стекового калькулятора расширен операцией D (duplicate), которая извлекает верхний элемент из стека и записывает его обратно в стек дважды, компилировать формулы, содержащие фигурные скобки {}, обозначающие возведение в квадрат стоящего в них выражения.
35. В предположении, что язык стекового калькулятора расширен унарной операцией A (abs), которая заменяет верхний элемент стека на его абсолютную величину, компилировать формулы, содержащие обозначаемую двумя вертикальными палочками операцию вычисления модуля (например, |a|).
36. Формулы, содержащие переменную a, значение которой следует считать равным нулю, компилируются в оптимизированные формулы, не содержащие лишних сложений и вычитаний.
37. Формулы, содержащие переменную b, значение которой следует считать равным единице, компилируются в оптимизированные формулы, не содержащие лишних умножений и делений.
38. Формулы, содержащие переменные a и b, значение которых следует считать равным двойке, компилируются в оптимизированные формулы, в которых умножение заменено сложением.
39. Результат работы компилятора — формула на входном языке, в которой каждое из выполняемых действий заключено в скобки.
40. Результат работы компилятора — дерево вывода исходной формулы.

### Задания на модификацию интерпретатора арифметических выражений(calc)

1. Вычитание рассматривается, как правоассоциативная операция.
2. Приоритет операции сложения ниже, чем у операций умножения и деления (их приоритеты равны между собой), а приоритет вычитания максимален.
3. Для группировки можно использовать не только круглые скобки, но и «угловые скобки» (например, <2-3>*4).
4. Вычисляются значения выражений, содержащих только записанные в десятичной системе счисления натуральные числа, абсолютная величина которых не превосходит 3999. Результат должен быть выдан в десятичной системе счисления.
5. Вычисляются значения выражений, содержащих только записанные в восьмеричной системе натуральные числа (обязательно начинающиеся с 0o или 0O), абсолютная величина которых не превосходит 3999. Результат должен быть выдан в десятичной системе счисления.
6. Вычисляются значения выражений, содержащих только записанные в шестнадцатеричной системе натуральные числа (обязательно начинающиеся с 0x или 0X), абсолютная величина которых не превосходит 3999. Результат должен быть выдан в десятичной системе счисления.
7. Вычисляются значения выражений, содержащих только записанные в двоичной системе натуральные числа (обязательно начинающиеся с 0b или 0B), абсолютная величина которых не превосходит 3999. Результат должен быть выдан в десятичной системе счисления.
8. Вычисляются значения выражений, содержащих только записанные в римской системе натуральные числа (с цифрами I, V, X, L, C, D и M), абсолютная величина которых не превосходит 3999. Результат должен быть выдан в десятичной системе счисления.
9. Вычисляются значения выражений, содержащих только записанные в десятичной системе счисления натуральные числа, абсолютная величина которых не превосходит 3999, и при этом все операции считаются имеющими одинаковый приоритет. Результат должен быть выдан в десятичной системе счисления.
10. Вычисляются значения выражений, содержащих только записанные в восьмеричной системе натуральные числа (обязательно начинающиеся с 0o или 0O), абсолютная величина которых не превосходит 3999, и при этом все операции считаются правоассоциативными. Результат должен быть выдан в десятичной системе счисления.
11. Вычисляются значения выражений, содержащих только записанные в шестнадцатеричной системе натуральные числа (обязательно начинающиеся с 0x или 0X), абсолютная величина которых не превосходит 3999, и при этом приоритет умножения является минимальным. Результат должен быть выдан в десятичной системе счисления.
12. Вычисляются значения выражений, содержащих только записанные в двоичной системе натуральные числа (обязательно начинающиеся с 0b или 0B), абсолютная величина которых не превосходит 3999, и при этом деление считается правоассоциативной операцией, имеющей минимальный приоритет. Результат должен быть выдан в десятичной системе счисления.
13. Вычисляются значения выражений, содержащих наряду с обычными аргументами-цифрами и записанные в римской системе натуральные числа (с цифрами I, V, X, L, C, D и M), абсолютная величина которых не превосходит 3999. Результат должен быть выдан в десятичной системе счисления.
14. Операция «угловые скобки» <> трактуется, как вычисление функции x*x-x+1 от аргумента x — величины внутри этих скобок, например, <3> равно 7 (3*3-3+1).
15. Вычисляются значения выражений, содержащих битовые операции | и &, приоритет которых считается максимальным.
16. Вычисляются значения выражений, содержащих битовые операции | и &, приоритет первой из которых считается равным приоритету сложения, а второй — приоритету умножения.
17. Вычисляются значения выражений, содержащих битовые операции << и >>, приоритет которых считается равным приоритету сложения и вычитания.
18. Вычисляются значения выражений, содержащих битовые операции << и >>, приоритет первой из которых является минимальным, а второй — максимальным.
19. Вычисляются значения выражений, содержащих унарную операцию -, имеющую максимальный приоритет.
20. Вычисляются значения выражений, содержащих унарную битовую операцию ~.
21. Вычисляются значения выражений, содержащих операцию возведения в степень, обозначаемую символом ^, которая считается левоассоциативной и имеющей минимальный приоритет.
22. Вычисляются значения выражений, содержащих операцию возведения в степень, обозначаемую символами **, которая считается правоассоциативной и имеющей приоритет, совпадающий с приоритетами умножения и деления.
23. Вычисляются значения выражений, содержащих унарную операцию нахождения факториала неотрицательного числа, обозначаемую символом !, которая имеет максимальный приоритет. Например, значением выражения 2-3! является -4.
24. Вычисляются значения выражений, содержащих операцию нахождения числа Фибоначчи с заданным неотрицательным индексом, обозначаемую символами fib, которая имеет максимальный приоритет. Например, значением выражения 2+fib(3) является 4.
25. Вычисляются значения выражений, содержащих операцию нахождения целой части величины арктангенса в градусах от заданного аргумента, обозначаемую символами atan, которая имеет максимальный приоритет. Например, значением выражения atan(0) является 0.
26. Вычисляются значения выражений, содержащих кроме цифр также и одну или несколько переменных a, величина каждой из которых определяется как её позиция (индекс) в выражении.
27. Вычисляются значения выражений, содержащих кроме цифр также и одну или несколько переменных от a до z, величина каждой из которых определяется как её ASCII-код.
28. Вычисляются значения выражений, содержащих кроме цифр также и одну или несколько переменных a и b, величина каждой из которых изначально равна нулю и увеличивается на единицу после каждого использования в процессе вычисления выражения. Например, значением выражения a+a+a является число 3.
29. Вычисляются значения выражений, содержащих кроме цифр также и одну или несколько переменных a и b, величина каждой из которых изначально равна нулю, и уменьшается на единицу перед каждым использованием в процессе вычисления выражения. Например, значением выражения a+a+a является число -6.
30. Вычисляются значения выражений, в которых допустимо использование операции @-, отличающейся от вычитания лишь тем, что она правоассоциативна.
31. Вычисляются значения выражений, в которых допустимо использование операции @/, отличающейся от деления правоассоциативностью и приоритетом, который у неё ниже приоритета сложения и вычитания.
32. Вычисляются значения выражений, в которых допустимо использование «переменных» $0, значение которых равно количеству нулей, встретившихся в формуле до позиции текущей «переменной» (нули, входящие в запись самой «переменной», не учитываются).
33. Вычисляются значения выражений, в которых допустимо использование «переменных» $+, $-, $* и $/, значения которых равны соответственно количеству операций сложения, вычитания, умножения и деления, встретившихся в формуле до позиции текущей «переменной».
34. Вычисляются значения выражений, в которых допустимо использование «переменных» $$, значение каждой из которых равно количеству арифметических операций, встретившихся в формуле до позиции текущей «переменной».
35. Вычисляются значения выражений, в которых допустимо использование «переменных» $+ и $-, значения которых равны количеству тех арифметических операций, встретившихся в формуле до позиции текущей «переменной», результат выполнения которых оказался положительным (для $+) или отрицательным (для $-).
36. Вычисляются значения выражений, в которых допустимо использование «переменных» $0, значение которых равно количеству нулей, встретившихся в формуле до позиции текущей «переменной» (нули, входящие в запись самой «переменной», не учитываются), и при этом приоритет сложения является максимальным.
37. Вычисляются значения выражений, в которых допустимо использование «переменных» $+, $-, $* и $/, значения которых равны соответственно количеству операций сложения, вычитания, умножения и деления, встретившихся в формуле до позиции текущей «переменной», и при этом вычитание является правоассоциативной операцией.
38. Вычисляются значения выражений, в которых допустимо использование «переменных» $$, значение каждой из которых равно количеству арифметических операций, встретившихся в формуле до позиции текущей «переменной» и при этом все операции имеют одинаковый приоритет.
39. Вычисляются значения выражений, в которых допустимо использование «переменных» $+ и $-, значения которых равны количеству тех арифметических операций, встретившихся в формуле до позиции текущей «переменной», результат выполнения которых оказался положительным (для $+) или отрицательным (для $-), и при этом деление трактуется как правоассоциативная операция.

### Отработка тестов
Тесты запускается посредством команды `coverage run -m pytest -p no:cacheprovider tests/ && coverage report -m`

Модуль `coverage` используется для измерения того, какая часть кода Python была выполнена тестами и создает отчет о покрытии кода тестами, находящиемся в папке `tests/`

Параметры отчета:

* имя файла Python или модуля
* количество строчек кода в данном файле или модуле
* количество строчек, которые не были выполнены во время тестов.
* процент строк, которые были выполнены во время тестов. Он вычисляется как (Stmts - Miss) / Stmts * 100
* номера строк, которые не были выполнены во время тестов

```
tests/test_calc.py .......................                               [ 51%]
tests/test_compf.py ...................                                  [ 93%]
tests/test_stack.py ...                                                  [100%]
============================== 45 passed in 0.14s ==============================
Name                  Stmts   Miss  Cover   Missing
---------------------------------------------------
calc.py                  25      4    84%   47-50
compf.py                 50      4    92%   71-74
stack.py                 11      0   100%
tests/test_calc.py       55      0   100%
tests/test_compf.py      42      0   100%
tests/test_stack.py      16      0   100%
---------------------------------------------------
TOTAL                   199      8    96%
```

